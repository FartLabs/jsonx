<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>jsonx</title>
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        background-color: #bbb;
        overflow-y: scroll;
        overflow-x: hidden;
        margin: 0 -5px 0 0;
      }

      nav {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1em 1em 0 1em;
      }

      .badges {
        display: flex;
        gap: 0.5em;
      }

      .badges img {
        height: 1.5em;
      }

      main {
        padding: 0 1em;
      }

      details {
        color: #bbb;
        outline: 2px solid #333;
        border-radius: 0.5em;
        margin: 1em 0;
      }

      details summary {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.5em;
        border-radius: 0.5em;
        background-color: #333;
      }

      details[open] summary {
        border-bottom: 2px solid #333;
        border-radius: 0.5em 0.5em 0 0;
      }

      details:not([open]) summary span:first-child::before {
        content: "▶";
        margin-right: 0.5em;
      }

      details[open] summary span:first-child::before {
        content: "▼";
        margin-right: 0.5em;
      }

      #editor,
      iframe {
        width: 100%;
        height: 34vh;
        background-color: #fff;
        padding: 0.5em;
        resize: vertical;
        margin-bottom: -5px;
        border-radius: 0 0 0.5em 0.5em;
      }

      #buildOutput,
      #consoleOutput {
        margin: 0;
        padding: 0.5em;
        list-style: none;
        white-space: pre-wrap;
        word-wrap: break-word;
        background-color: #000;
      }

      #buildOutput:empty::before,
      #consoleOutput:empty::before {
        content: "No output";
        color: #bbb;
        display: block;
        padding: 0.5em;
      }
    </style>
  </head>
  <body>
    <nav>
      <a href="/"><h1>jsonx</h1></a>

      <span class="badges"
        ><a href="https://jsr.io/badges/@fartlabs/jsonx/score"
          ><img
            class="jsr-badge"
            src="https://jsr.io/badges/@fartlabs/jsonx/score"
            alt="JSR badge" /></a
        ><a href="https://github.com/FartLabs/jsonx"
          ><img
            class="github-badge"
            src="https://simpleicons.org/icons/github.svg"
            alt="GitHub badge" /></a
      ></span>
    </nav>

    <main>
      <details open>
        <summary>
          <span>Code</span>
          <span>
            <select id="version" disabled></select>
            <button id="play" disabled>Play</button>
            <button id="share" disabled>Share</button>
          </span>
        </summary>

        <textarea id="editor"></textarea>
      </details>

      <details open>
        <summary>
          <span>Result</span>
          <span>
            <button id="refresh" disabled>Refresh</button>
          </span>
        </summary>
        <iframe
          id="result"
          name="jsonx"
          title="jsonx playground"
          sandbox="allow-forms allow-modals allow-pointer-lock allow-popups allow-same-origin allow-scripts allow-top-navigation-by-user-activation allow-downloads allow-presentation"
          allow="accelerometer *; camera *; encrypted-media *; display-capture *; geolocation *; gyroscope *; microphone *; midi *; clipboard-read *; clipboard-write *; web-share *; serial *; xr-spatial-tracking *"
          scrolling="auto"
          allowtransparency="true"
          allowpaymentrequest="true"
          allowfullscreen="true"
          loading="lazy"
          spellcheck="false"
        >
        </iframe>
      </details>

      <details open>
        <summary>
          <span>Build output</span> <button id="clearBuildOutput">Clear</button>
        </summary>
        <ul id="buildOutput"></ul>
      </details>

      <details open>
        <summary>
          <span>Console</span> <button id="clearConsoleOutput">Clear</button>
        </summary>
        <ul id="consoleOutput"></ul>
      </details>
    </main>

    <script type="module" src="./play.js" defer></script>
  </body>
</html>
